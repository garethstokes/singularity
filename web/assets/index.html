<!DOCTYPE html>
<html>
  <head>
    <title>the singularity</title>
    <link rel="stylesheet" type="text/css" href="stylesheets/singularity.css">
    <script type="text/javascript" src="js/board.js"></script>
    <script type="text/javascript">
      (function() {
        "use strict";

        var board = singularity.board();

        var config = {
          width: 800,
          height: 800
        };

        window.onload = function() {
          board.set(config);
          board.start();
        };

        if (typeof window.WebSocket == 'function') {
          var address = "ws://localhost:8080";
          var endpoint = "/ws";
          var conn = new WebSocket(address + endpoint);

          conn.onopen = function() { console.log('ws open'); }
          conn.onclose = function() { console.log('ws close'); }

          conn.onerror = function(error) {
            console.log(error);
          }

          conn.onmessage = function(message) {
            console.log(message);
            board.update(JSON.parse(message.data));
          };
        }
      })()
    </script>
  </head>
  <body>
    <div id="errors"></div>
    <div id="board" />
  </body>
</html>
